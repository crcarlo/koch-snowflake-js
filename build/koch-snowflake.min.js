!function(){function t(){return"qs_"+ ++r}function e(t,e){var n=o("div",null,"qs_label",e);return n.innerHTML=t,n}function n(t,e,n,i){var r=o("input",e,n,i);return r.type=t,r}function o(t,e,n,o){var i=document.createElement(t);if(i)return i.id=e,n&&(i.className=n),o&&o.appendChild(i),i}function i(){return-1!=navigator.userAgent.indexOf("rv:11")||-1!=navigator.userAgent.indexOf("MSIE")}var r=0,a=!1,s=".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer;display:inline}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",l={_version:"3.0.2",_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,useExtStyleSheet:function(){a=!0},create:function(t,e,n,o){var i=Object.create(this);return i._init(t,e,n,o),i},destroy:function(){for(var t in this._panel.parentElement&&this._panel.parentElement.removeChild(this._panel),this)this[t]=null},_init:function(t,e,n,o){a||function(){var t=document.createElement("style");t.innerText=s,document.head.appendChild(t),a=!0}(),this._bindHandlers(),this._createPanel(t,e,o),this._createTitleBar(n||"QuickSettings"),this._createContent()},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},getValuesAsJSON:function(t){var e={};for(var n in this._controls)this._controls[n].getValue&&(e[n]=this._controls[n].getValue());return t&&(e=JSON.stringify(e)),e},setValuesFromJSON:function(t){for(var e in"string"==typeof t&&(t=JSON.parse(t)),t)this._controls[e]&&this._controls[e].setValue&&this._controls[e].setValue(t[e]);return this},saveInLocalStorage:function(t){return this._localStorageName=t,this._readFromLocalStorage(t),this},clearLocalStorage:function(t){return localStorage.removeItem(t),this},_saveInLocalStorage:function(t){localStorage.setItem(t,this.getValuesAsJSON(!0))},_readFromLocalStorage:function(t){var e=localStorage.getItem(t);e&&this.setValuesFromJSON(e)},_createPanel:function(t,e,n){this._panel=o("div",null,"qs_main",n||document.body),this._panel.style.zIndex=++l._topZ,this.setPosition(t||0,e||0),this._controls={}},_createTitleBar:function(t){this._titleBar=o("div",null,"qs_title_bar",this._panel),this._titleBar.textContent=t,this._titleBar.addEventListener("mousedown",this._startDrag),this._titleBar.addEventListener("dblclick",this._doubleClickTitle)},_createContent:function(){this._content=o("div",null,"qs_content",this._panel)},_createContainer:function(){var t=o("div",null,"qs_container");return t.addEventListener("focus",function(){this.className+=" qs_container_selected"},!0),t.addEventListener("blur",function(){var t=this.className.indexOf(" qs_container_selected");t>-1&&(this.className=this.className.substr(0,t))},!0),this._content.appendChild(t),t},setPosition:function(t,e){return this._panel.style.left=t+"px",this._panel.style.top=Math.max(e,0)+"px",this},setSize:function(t,e){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this._content.style.height=e-this._titleBar.offsetHeight+"px",this},setWidth:function(t){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this},setHeight:function(t){return this._content.style.height=t-this._titleBar.offsetHeight+"px",this},setDraggable:function(t){return this._draggable=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},_startDrag:function(t){this._draggable&&(this._panel.style.zIndex=++l._topZ,document.addEventListener("mousemove",this._drag),document.addEventListener("mouseup",this._endDrag),this._startX=t.clientX,this._startY=t.clientY),t.preventDefault()},_drag:function(t){var e=parseInt(this._panel.style.left),n=parseInt(this._panel.style.top),o=t.clientX,i=t.clientY;this.setPosition(e+o-this._startX,n+i-this._startY),this._startX=o,this._startY=i,t.preventDefault()},_endDrag:function(t){document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._endDrag),t.preventDefault()},setGlobalChangeHandler:function(t){return this._globalChangeHandler=t,this},_callGCH:function(t){this._localStorageName&&this._saveInLocalStorage(this._localStorageName),this._globalChangeHandler&&this._globalChangeHandler(t)},hide:function(){return this._panel.style.visibility="hidden",this._hidden=!0,this},show:function(){return this._panel.style.visibility="visible",this._panel.style.zIndex=++l._topZ,this._hidden=!1,this},toggleVisibility:function(){return this._hidden?this.show():this.hide(),this},setCollapsible:function(t){return this._collapsible=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},collapse:function(){return this._panel.removeChild(this._content),this._collapsed=!0,this},expand:function(){return this._panel.appendChild(this._content),this._collapsed=!1,this},toggleCollapsed:function(){return this._collapsed?this.expand():this.collapse(),this},setKey:function(t){return this._keyCode=t.toUpperCase().charCodeAt(0),document.addEventListener("keyup",this._onKeyUp),this},_onKeyUp:function(t){t.keyCode===this._keyCode&&["INPUT","SELECT","TEXTAREA"].indexOf(t.target.tagName)<0&&this.toggleVisibility()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},removeControl:function(t){if(this._controls[t])var e=this._controls[t].container;return e&&e.parentElement&&e.parentElement.removeChild(e),this._controls[t]=null,this},enableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!1),this},disableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!0),this},hideControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="none"),this},showControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="block"),this},overrideStyle:function(t,e,n){return this._controls[t]&&(this._controls[t].control.style[e]=n),this},hideTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="none"),this},showTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="block"),this},hideAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="none")}return this},showAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="block")}return this},getValue:function(t){return this._controls[t].getValue()},setValue:function(t,e){return this._controls[t].setValue(e),this._callGCH(t),this},addBoolean:function(e,i,r){var a=this._createContainer(),s=t(),l=o("label",null,"qs_checkbox_label",a);l.textContent=e,l.setAttribute("for",s);var c=o("label",null,"qs_checkbox",a);c.setAttribute("for",s);var u=n("checkbox",s,null,c);u.checked=i,o("span",null,null,c),this._controls[e]={container:a,control:u,getValue:function(){return this.control.checked},setValue:function(t){this.control.checked=t,r&&r(t)}};var d=this;return u.addEventListener("change",function(){r&&r(u.checked),d._callGCH(e)}),this},bindBoolean:function(t,e,n){return this.addBoolean(t,e,function(e){n[t]=e})},addButton:function(e,o){var i=this._createContainer(),r=n("button",t(),"qs_button",i);r.value=e,this._controls[e]={container:i,control:r};var a=this;return r.addEventListener("click",function(){o&&o(r),a._callGCH(e)}),this},addColor:function(r,a,s){if(function(){var t=navigator.userAgent.toLowerCase();return!(t.indexOf("chrome")>-1||t.indexOf("firefox")>-1||t.indexOf("epiphany")>-1)&&t.indexOf("safari/")>-1}()||navigator.userAgent.toLowerCase().indexOf("edge")>-1||i())return this.addText(r,a,s);var l=this._createContainer(),c=e("<b>"+r+":</b> "+a,l),u=t(),d=n("color",u,"qs_color",l);d.value=a||"#ff0000";var h=o("label",null,"qs_color_label",l);h.setAttribute("for",u),h.style.backgroundColor=d.value,this._controls[r]={container:l,control:d,colorLabel:h,label:c,title:r,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,this.colorLabel.style.backgroundColor=d.value,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,s&&s(t)}};var b=this;return d.addEventListener("input",function(){c.innerHTML="<b>"+r+":</b> "+d.value,h.style.backgroundColor=d.value,s&&s(d.value),b._callGCH(r)}),this},bindColor:function(t,e,n){return this.addColor(t,e,function(e){n[t]=e})},addDate:function(o,r,a){function s(t){if(t instanceof Date){var e=t.getFullYear(),n=t.getMonth()+1;n<10&&(n="0"+n);var o=t.getDate();return o<10&&(o="0"+o),e+"-"+n+"-"+o}return t}var l=s(r);if(i())return this.addText(o,l,a);var c=this._createContainer(),u=e("<b>"+o+"</b>",c),d=n("date",t(),"qs_text_input",c);d.value=l||"",this._controls[o]={container:c,control:d,label:u,getValue:function(){return this.control.value},setValue:function(t){var e=s(t);this.control.value=e||"",a&&a(e)}};var h=this;return d.addEventListener("input",function(){a&&a(d.value),h._callGCH(o)}),this},bindDate:function(t,e,n){return this.addDate(t,e,function(e){n[t]=e})},addDropDown:function(t,n,i){for(var r=this._createContainer(),a=e("<b>"+t+"</b>",r),s=o("select",null,"qs_select",r),l=0;l<n.length;l++){var c=o("option"),u=n[l];u.label?(c.value=u.value,c.innerText=u.label):(c.label=u,c.innerText=u),s.add(c)}var d=this;return s.addEventListener("change",function(){var e=s.selectedIndex,o=s.options;i&&i({index:e,label:o[e].label,value:n[e].value||n[e]}),d._callGCH(t)}),this._controls[t]={container:r,control:s,label:a,getValue:function(){var t=this.control.selectedIndex;return{index:t,label:this.control.options[t].label,value:n[t].value||n[t]}},setValue:function(t){var e;e=null!=t.index?t.index:t;var o=this.control.options;this.control.selectedIndex=e,i&&i({index:e,label:o[e].label,value:n[e].value||n[e]})}},this},bindDropDown:function(t,e,n){return this.addDropDown(t,e,function(e){n[t]=e.value})},addElement:function(t,n){var o=this._createContainer(),i=e("<b>"+t+"</b>",o);return o.appendChild(n),this._controls[t]={container:o,label:i},this},addFileChooser:function(i,r,a,s){var l=this._createContainer(),c=e("<b>"+i+"</b>",l),u=t(),d=n("file",u,"qs_file_chooser",l);a&&(d.accept=a);var h=o("label",null,"qs_file_chooser_label",l);h.setAttribute("for",u),h.textContent=r||"Choose a file...",this._controls[i]={container:l,control:d,label:c,getValue:function(){return this.control.files[0]}};var b=this;return d.addEventListener("change",function(){d.files&&d.files.length&&(h.textContent=d.files[0].name,s&&s(d.files[0]),b._callGCH(i))}),this},addHTML:function(t,n){var i=this._createContainer(),r=e("<b>"+t+":</b> ",i),a=o("div",null,null,i);return a.innerHTML=n,this._controls[t]={container:i,label:r,control:a,getValue:function(){return this.control.innerHTML},setValue:function(t){this.control.innerHTML=t}},this},addImage:function(t,n,i){var r=this._createContainer(),a=e("<b>"+t+"</b>",r);return img=o("img",null,"qs_image",r),img.src=n,this._controls[t]={container:r,control:img,label:a,getValue:function(){return this.control.src},setValue:function(t){this.control.src=t,i&&img.addEventListener("load",function e(){img.removeEventListener("load",e),i(t)})}},this},addRange:function(t,e,n,o,i,r){return this._addNumber("range",t,e,n,o,i,r)},addNumber:function(t,e,n,o,i,r){return this._addNumber("number",t,e,n,o,i,r)},_addNumber:function(o,r,a,s,l,c,u){var d=this._createContainer(),h=e("",d),b="range"===o?"qs_range":"qs_text_input qs_number",g=n(o,t(),b,d);g.min=a||0,g.max=s||100,g.step=c||1,g.value=l||0,h.innerHTML="<b>"+r+":</b> "+g.value,this._controls[r]={container:d,control:g,label:h,title:r,callback:u,getValue:function(){return parseFloat(this.control.value)},setValue:function(t){this.control.value=t,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,u&&u(parseFloat(t))}};var p="input";"range"===o&&i()&&(p="change");var f=this;return g.addEventListener(p,function(){h.innerHTML="<b>"+r+":</b> "+g.value,u&&u(parseFloat(g.value)),f._callGCH(r)}),this},bindRange:function(t,e,n,o,i,r){return this.addRange(t,e,n,o,i,function(e){r[t]=e})},bindNumber:function(t,e,n,o,i,r){return this.addNumber(t,e,n,o,i,function(e){r[t]=e})},setRangeParameters:function(t,e,n,o){return this.setNumberParameters(t,e,n,o)},setNumberParameters:function(t,e,n,o){var i=this._controls[t],r=i.control.value;return i.control.min=e,i.control.max=n,i.control.step=o,i.control.value!==r&&i.callback&&i.callback(i.control.value),this},addPassword:function(t,e,n){return this._addText("password",t,e,n)},bindPassword:function(t,e,n){return this.addPassword(t,e,function(e){n[t]=e})},addProgressBar:function(t,n,i,r){var a=this._createContainer(),s=e("",a),l=o("div",null,"qs_progress",a),c=o("div",null,"qs_progress_value",l);return c.style.width=i/n*100+"%",s.innerHTML="numbers"===r?"<b>"+t+":</b> "+i+" / "+n:"percent"===r?"<b>"+t+":</b> "+Math.round(i/n*100)+"%":"<b>"+t+"</b>",this._controls[t]={container:a,control:l,valueDiv:c,valueDisplay:r,label:s,value:i,max:n,title:t,getValue:function(){return this.value},setValue:function(t){this.value=Math.max(0,Math.min(t,this.max)),this.valueDiv.style.width=this.value/this.max*100+"%","numbers"===this.valueDisplay?this.label.innerHTML="<b>"+this.title+":</b> "+this.value+" / "+this.max:"percent"===this.valueDisplay&&(this.label.innerHTML="<b>"+this.title+":</b> "+Math.round(this.value/this.max*100)+"%")}},this},setProgressMax:function(t,e){var n=this._controls[t];return n.max=e,n.value=Math.min(n.value,n.max),n.valueDiv.style.width=n.value/n.max*100+"%","numbers"===n.valueDisplay?n.label.innerHTML="<b>"+n.title+":</b> "+n.value+" / "+n.max:"percent"===n.valueDisplay?n.label.innerHTML="<b>"+n.title+":</b> "+Math.round(n.value/n.max*100)+"%":n.label.innerHTML="<b>"+n.title+"</b>",this},addText:function(t,e,n){return this._addText("text",t,e,n)},_addText:function(i,r,a,s){var l,c=this._createContainer(),u=e("<b>"+r+"</b>",c);"textarea"===i?(l=o("textarea",t(),"qs_textarea",c)).rows=5:l=n(i,t(),"qs_text_input",c),l.value=a||"",this._controls[r]={container:c,control:l,label:u,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,s&&s(t)}};var d=this;return l.addEventListener("input",function(){s&&s(l.value),d._callGCH(r)}),this},bindText:function(t,e,n){return this.addText(t,e,function(e){n[t]=e})},addTextArea:function(t,e,n){return this._addText("textarea",t,e,n)},setTextAreaRows:function(t,e){return this._controls[t].control.rows=e,this},bindTextArea:function(t,e,n){return this.addTextArea(t,e,function(e){n[t]=e})},addTime:function(o,r,a){var s;if(r instanceof Date){var l=r.getHours();l<10&&(l="0"+l);var c=r.getMinutes();c<10&&(c="0"+c);var u=r.getSeconds();u<10&&(u="0"+u),s=l+":"+c+":"+u}else s=r;if(i())return this.addText(o,s,a);var d=this._createContainer(),h=e("<b>"+o+"</b>",d),b=n("time",t(),"qs_text_input",d);b.value=s||"",this._controls[o]={container:d,control:b,label:h,getValue:function(){return this.control.value},setValue:function(t){var e;if(t instanceof Date){var n=t.getHours();n<10&&(n="0"+n);var o=t.getMinutes();o<10&&(o="0"+o);var i=t.getSeconds();i<10&&(i="0"+i),e=n+":"+o+":"+i}else e=t;this.control.value=e||"",a&&a(e)}};var g=this;return b.addEventListener("input",function(){a&&a(b.value),g._callGCH(o)}),this},bindTime:function(t,e,n){return this.addTime(t,e,function(e){n[t]=e})}};"object"==typeof exports&&"object"==typeof module?module.exports=l:"function"==typeof define&&define.amd?define(l):window.QuickSettings=l}();var canvas=document.getElementById("koch-snowflake-canvas"),context=canvas.getContext("2d"),canvas_top=canvas.getBoundingClientRect().top,backgroundColor="#f2f2f2",lineColor="#1abc9c";document.body.style.backgroundColor=backgroundColor;var body=document.getElementsByTagName("body")[0],width=body.clientWidth-20,height=body.clientHeight-20;canvas.setAttribute("width",width-10),canvas.setAttribute("height",height);var panel=QuickSettings.create(10,10+canvas_top,"Paramethers",null).addRange("Polygon Edges",3,12,3,1,update).addRange("Iterations",0,6,0,1,update).addRange("Spike Elevation",-4,4,1,.01,update).addRange("Spike Base Width",-3,3,1,.01,update).addRange("Spike Rotation",-180,180,0,1,update).addRange("Rotation",-180,180,0,1,update).addRange("ShiftX",-300,300,0,1,update).addRange("ShiftY",-300,300,0,1,update).addRange("Zoom",0,2,1,.01,update).addRange("Edge Thickness",1,10,1,.1,draw).addButton("Info",toggleInfoPanel).addButton("Color",toggleColorPanel),infoPanel=QuickSettings.create(220,10+canvas_top,"Info",null).addHTML("ABOUT THIS",'This script is made for playing around with the Koch curve. You can find more informations about it <a href="https://en.wikipedia.org/wiki/Koch_snowflake" target="_blank">here</a>.').addHTML("AUTHOR","Carlo Cervellin").addHTML("WARNING","A high number of interations might slow your browser down depending on your processor speed and dedicated power for JavaScript engine.");toggleInfoPanel();var colorPanel=QuickSettings.create(width/2-100,height/3+canvas_top,"Color",null).addColor("Background Color",backgroundColor,changeBackgroundColor).addColor("Line Color",lineColor,changeLineColor).addButton("Close",toggleColorPanel);function changeBackgroundColor(){document.body.style.backgroundColor=colorPanel.getValue("Background Color")}function changeLineColor(){lineColor=colorPanel.getValue("Line Color"),draw()}function toggleInfoPanel(){infoPanel.toggleVisibility()}function toggleColorPanel(){colorPanel.toggleVisibility()}toggleColorPanel();var elevation,spikeBaseWidth,rotation,centerX=4*width/7,centerY=height/2,centerDX=0,centerDY=0,edge=width/6,edgeScale=1,globalRotation=0,edgeThickness=1,points=[];function update(){elevation=panel.getValue("Spike Elevation"),spikeBaseWidth=panel.getValue("Spike Base Width"),rotation=panel.getValue("Spike Rotation");var t=panel.getValue("Iterations");centerDX=panel.getValue("ShiftX"),centerDY=panel.getValue("ShiftY"),edgeScale=panel.getValue("Zoom"),globalRotation=panel.getValue("Rotation"),initialize(panel.getValue("Polygon Edges"));for(var e=0;e<t;e++)iterationCicle();draw()}function initialize(t){_edge=edge*edgeScale,alpha=2*Math.PI/t,rot=globalRotation*Math.PI/180,xc=centerX+centerDX,yc=centerY+centerDY,_points=[];for(var e=0;e<t;e++)_points.push({x:xc+Math.cos(e*alpha+rot)*_edge,y:yc+Math.sin(e*alpha+rot)*_edge});_points.push(_points[0]),points=_points}function iterationCicle(){for(var t=points.length-2;t>=0;t--)singleIteration(t)}function singleIteration(t){var e=Math.sqrt((points[t+1].x-points[t].x)*(points[t+1].x-points[t].x)+(points[t+1].y-points[t].y)*(points[t+1].y-points[t].y))/3,n=(points[t+1].x-points[t].x)*(3-spikeBaseWidth)/6,o=(points[t+1].y-points[t].y)*(3-spikeBaseWidth)/6,i={x:points[t].x+n,y:points[t].y+o},r={x:points[t+1].x-n,y:points[t+1].y-o};points.splice(t+1,0,r),points.splice(t+1,0,i);var a=points[t+1],s=points[t+2],l=(a.x+s.x)/2,c=(a.y+s.y)/2,u=(e=e*elevation*Math.sqrt(3)/2,Math.atan((s.y-a.y)/(s.x-a.x))+Math.PI/2+rotation*Math.PI/180),d={x:l-Math.cos(u)*e,y:c-Math.sin(u)*e};s.x<a.x&&(d={x:l+Math.cos(u)*e,y:c+Math.sin(u)*e}),points.splice(t+2,0,d)}function draw(){edgeThickness=panel.getValue("Edge Thickness"),context.clearRect(0,0,width,height);for(var t=0;t<points.length-1;t++)context.strokeStyle=lineColor,context.lineWidth=edgeThickness,context.beginPath(),context.moveTo(points[t].x,points[t].y),context.lineTo(points[t+1].x,points[t+1].y),context.stroke()}update();